<div class="diagram">
  <div class="toolbar">
    <button mat-button (click)="toggleDraggable()">
      <mat-icon [matTooltip]="isDraggable() ? 'Lock drag' : 'Unlock drag'">
        {{ isDraggable() ? "lock" : "lock_open" }}
      </mat-icon>
    </button>
  </div>
  <div #vflowContainer class="vflow-container">
    <grafen-background-svg #svgBackground></grafen-background-svg>
    <vflow
      #vflow
      view="auto"
      (onConnect)="connect($event)"
      (onNodesChange.position)="nodeChange($event)"
      [connection]="connectionSetting"
      [nodes]="vNodes()"
      [edges]="edges"
      [background]="background"
      [maxZoom]="25"
      [minZoom]="-25"
    >
      <ng-template nodeHtml let-ctx>
        <custom-node [nodeContext]="ctx" />
      </ng-template>
      <ng-template edge let-ctx>
        <svg:g eta-edge [edgeContext]="ctx" />
      </ng-template>
    </vflow>
  </div>
</div>
